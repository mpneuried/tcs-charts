!function(){}.call(this),function(){var a,b,c=function(a,b){return function(){return a.apply(b,arguments)}},d=[].slice;null!=("undefined"!=typeof module&&null!==module?module.exports:void 0)&&(this.d3=require("d3")),b=a=function(){function a(a,b,d){var e,f=this;this.target=a,null==b&&(b=0),this.tweenNeedle=c(this.tweenNeedle,this),this.tween=c(this.tween,this),this._set=c(this._set,this),this._getColorByFactor=c(this._getColorByFactor,this),this._getAngleByFactor=c(this._getAngleByFactor,this),this._calcNeedle=c(this._calcNeedle,this),this.create=c(this.create,this),this._arc=c(this._arc,this),this._radToAngle=c(this._radToAngle,this),this._angleToRad=c(this._angleToRad,this),this._initOption=c(this._initOption,this),this._initOptions=c(this._initOptions,this),this._extend=c(this._extend,this),this.define=c(this.define,this),this.setter=c(this.setter,this),this.getter=c(this.getter,this);try{Object.defineProperty(this,"testIE",{get:function(){return!1}})}catch(g){return new Error("browser-outdated","tcs-charts not availible on IE8 and lower.")}this._initOptions(d,!0),e={get:function(){return 100*f._value},set:function(a){a>1&&(a/=100),f._set(a)}},this.define("value",e,this),this.value=b,this.create()}return a.prototype.defaults={width:500,margin:0,startAngle:-75,endAngle:75,thicknessFactor:.8,needleLengthFactor:null,bgColor:"#ddd",needleColor:"#333",fixedColor:null,startColor:"#B4EB57",endColor:"#D10000",animationDuration:500},a.prototype._rad=2*Math.PI/360,a.prototype.getter=function(a,b,c){null==c&&(c=this),Object.defineProperty(c,a,{get:b})},a.prototype.setter=function(a,b,c){null==c&&(c=this),Object.defineProperty(c,a,{set:b})},a.prototype.define=function(a,b,c){Object.defineProperty(c,a,b)},a.prototype._extend=function(){var a,b,c,e,f,g;for(c=1<=arguments.length?d.call(arguments,0):[],f=0,g=c.length;g>f;f++){b=c[f];for(a in b)e=b[a],c[0][a]=e}return c[0]},a.prototype._initOptions=function(a,b){var c;if(null==b&&(b=!1),b&&this._extend(this.opt={},this.defaults,a),this.opt.height=this.opt.width/2,b)for(c in this.opt)this._initOption(c)},a.prototype._initOption=function(a){var b,c=this;return b={get:function(){return"needleLengthFactor"===a&&null==c.opt[a]?c.opt.thicknessFactor:c.opt[a]},set:function(b){switch(c.opt[a]=b,a){case"width":case"needleLengthFactor":case"thicknessFactor":c._initOptions(null),c.create();break;case"animationDuration":case"startColor":case"endColor":break;default:c.create()}}},this.define(a,b,this)},a.prototype._angleToRad=function(a){return this._rad*a},a.prototype._radToAngle=function(a){return a/this._rad},a.prototype._arc=function(a){var b;return b=d3.svg.arc().outerRadius(this.opt.width/2.05).innerRadius(this.opt.width/6/this.opt.thicknessFactor).startAngle(this._angleToRad(this.opt.startAngle)),null!=a&&b.endAngle(this._angleToRad(a)),b},a.prototype.create=function(){var a;a=d3.select(this.target),a.select("svg").remove(),this.svg=a.append("svg").attr("height",this.opt.height+2*this.opt.margin).attr("width",this.opt.width+2*this.opt.margin).style("fill","#666").append("g").attr("transform","translate("+this.opt.margin+","+this.opt.margin+")"),this.bg=this.svg.append("path").style("fill",this.opt.bgColor).attr("class","bg").attr("transform","translate("+this.opt.height+","+this.opt.height+")").attr("d",this._arc(this.opt.endAngle)),this.color=this.svg.append("path").attr("class","color").attr("transform","translate("+this.opt.height+","+this.opt.height+")").datum({endAngle:this._angleToRad(this._getAngleByFactor(this._value)),fill:this._getColorByFactor(this._value)}).attr("d",this.arc=this._arc()),null!=this.opt.fixedColor&&this.color.attr("fill",this.opt.fixedColor),this.opt.neelde||(this.needle=this.svg.append("path").style("fill",this.opt.needleColor).attr("class","needle").datum({angle:this._getAngleByFactor(this._value)}).attr("d",this._calcNeedle()).attr("transform","rotate("+this._getAngleByFactor(0)+" "+this.opt.height+" "+this.opt.height+")")),this._set(this._value)},a.prototype._calcNeedle=function(){var a,b;return b=this.opt.width,a=this.opt.height,"M"+.495*b+" 0 L"+.505*b+" 0 L"+.52*b+" "+.73*a*this.needleLengthFactor+" L"+.48*b+" "+.73*a*this.needleLengthFactor+" Z"},a.prototype._getAngleByFactor=function(a){return d3.interpolate(this.opt.startAngle,this.opt.endAngle)(a)},a.prototype._getColorByFactor=function(a){return d3.interpolateRgb(this.opt.startColor,this.opt.endColor)(a)},a.prototype._set=function(a,b){this._value=a,null==b&&(b=this.opt.animationDuration),null!=this.color&&this.color.transition().duration(b).call(this.tween,this._value),this.opt.neelde||null==this.needle||this.needle.transition().duration(b).call(this.tweenNeedle,this._value)},a.prototype.tween=function(a,b){var c,d,e=this;c=this._getAngleByFactor(b),a.attrTween("d",function(a){var b;return b=d3.interpolate(e.color.datum().endAngle,e._angleToRad(c)),function(c){return a.endAngle=b(c),e.arc(a)}}),null==this.opt.fixedColor&&(d=this._getColorByFactor(b),a.attrTween("fill",function(){var a;return a=d3.interpolate(e.color.datum().fill,d),function(b){return d=a(b),e.color.datum().fill=d,d}}))},a.prototype.tweenNeedle=function(a,b){var c,d=this;c=this._getAngleByFactor(b),a.attrTween("transform",function(){var a;return a=d3.interpolate(d.needle.datum().angle,c),function(b){var c;return c=a(b),d.needle.datum().angle=c,"rotate("+c+" "+d.opt.height+" "+d.opt.height+")"}})},a}(),null!=("undefined"!=typeof module&&null!==module?module.exports:void 0)?module.exports=b:(window.tcscharts||(window.tcscharts={}),window.tcscharts.Gauge=b)}.call(this),function(){}.call(this);